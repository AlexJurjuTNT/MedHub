<h2 class="content-block">Test Type List</h2>
<div class="content-block">
  <div class="dx-card responsive-paddings">

    <app-create-test-type-popup
      (createTestType)="createTestType($event)"
      [(visible)]="createPopupVisible">
    </app-create-test-type-popup>

    <app-update-test-type-popup
      (updateTestType)="updateTestType($event)"
      [(visible)]="updatePopupVisible"
      [selectedTestType]="selectedRow!">
    </app-update-test-type-popup>

    <dx-data-grid
      (onSelectionChanged)="onSelectionChanged($event)"
      [(selectedRowKeys)]="selectedRowKeys"
      [columnAutoWidth]="true"
      [columnHidingEnabled]="true"
      [dataSource]="customDataSource"
      [focusedRowEnabled]="false"
      [showBorders]="true"
      class="dx-card wide-card">

      <dxo-editing mode="popup"
                   [allowAdding]="isAdmin"
                   [allowUpdating]="isAdmin"
                   [allowDeleting]="isAdmin" [confirmDelete]="true">
      </dxo-editing>

      <dxo-toolbar>
        <dxi-item location="before">
          <div *dxTemplate>
            <dx-button
              icon="edit"
              text="Update Test Type"
              (onClick)="this.updatePopupVisible = true"
              [disabled]="!this.selectedRow">
            </dx-button>
          </div>
        </dxi-item>

        <dxi-item location="after">
          <div *dxTemplate>
            <dx-button
              icon="plus"
              (onClick)="this.createPopupVisible = true"
              [disabled]="!isAdmin">
            </dx-button>
          </div>
        </dxi-item>

      </dxo-toolbar>

      <dxo-selection mode="single"></dxo-selection>
      <dxo-paging [pageSize]="10"></dxo-paging>
      <dxo-pager [showInfo]="true" [showPageSizeSelector]="true"></dxo-pager>
      <dxo-filter-row [visible]="true"></dxo-filter-row>

      <dxi-column [width]="250" caption="Test Name" dataField="name"></dxi-column>
    </dx-data-grid>
  </div>
</div>
