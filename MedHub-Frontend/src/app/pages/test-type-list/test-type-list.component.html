<h2 class="content-block">Test Type List</h2>
<div class="content-block">

  <div class="dx-card responsive-paddings">

    <!--    Button that opens a popup for adding a new test type -->
    <dx-button (click)="showNewTestTypePopup()" text="Add Test Type"></dx-button>

    <dx-popup
      [(visible)]="createTestTypePopupVisible"
      [dragEnabled]="false"
      [height]="400"
      [showTitle]="true"
      [width]="300"
      title="Add New Test Type">
      <div *dxTemplate="let data of 'content'">
        <dx-text-box
          [(value)]="newTestTypeName"
          placeholder="Enter test type name"
        ></dx-text-box>
        <dx-button
          (onClick)="saveTestType()"
          [disabled]="!newTestTypeName"
          text="Save"
        ></dx-button>
        <dx-button (onClick)="createTestTypePopupVisible = false;" text="Cancel"></dx-button>
      </div>
    </dx-popup>

    <!--    Datagrid that lists all the test types -->
    <dx-data-grid [columnAutoWidth]="true"
                  [columnHidingEnabled]="true"
                  [dataSource]="dataSource"
                  [focusedRowEnabled]="false"
                  [showBorders]="true"
                  class="dx-card wide-card">

      <dxo-paging [pageSize]="10"></dxo-paging>
      <dxo-pager [showInfo]="true" [showPageSizeSelector]="true"></dxo-pager>
      <dxo-filter-row [visible]="true"></dxo-filter-row>

      <dxi-column [width]="90" caption="ID" dataField="id"></dxi-column>
      <dxi-column caption="Test Name" dataField="name"></dxi-column>
      <dxi-column caption="Actions" cellTemplate="actionCellTemplate"></dxi-column>

      <!--      Template that contains all the actions for a test type -->
      <div *dxTemplate="let data of 'actionCellTemplate'">
        <!--        Button that opens a dialog for deleting a test type -->
        <dx-button
          (click)="openDeletePopup(data.data.id)"
          text="Delete"
          type="danger"
        ></dx-button>

        <dx-button
          (click)="openUpdatePopup(data.data)"
          text="Update"
          type="normal"
        ></dx-button>
      </div>

    </dx-data-grid>
  </div>

  <!--      Popup for confirming deletion -->
  <dx-popup
    [(visible)]="deletePopupVisible"
    [dragEnabled]="false"
    [height]="400"
    [showTitle]="true"
    [width]="300"
    title="Delete Test Type">
    <div *dxTemplate="let data of 'content'">
      <p>Are you sure you want to delete this test type?</p>
      <dx-button (onClick)="deleteTestType()" text="Yes"></dx-button>
      <dx-button (onClick)="deletePopupVisible = false" text="No"></dx-button>
    </div>
  </dx-popup>

  <!--  Popup for updating the name of a test type -->
  <dx-popup
    [(visible)]="updatePopupVisible"
    [dragEnabled]="false"
    [height]="400"
    [showTitle]="true"
    [width]="300"
    title="Update Test Type">
    <div *dxTemplate="let data of 'content'">
      <p>Current Test Type Name: {{ updateTestTypeInfo.name }}</p>
      <dx-text-box
        [(value)]="newTestTypeName"
        placeholder="Enter new test type name"
      ></dx-text-box>
      <dx-button
        (onClick)="updateTestType()"
        [disabled]="!newTestTypeName"
        text="Update"
      ></dx-button>
      <dx-button (onClick)="updatePopupVisible = false" text="Cancel"></dx-button>
    </div>
  </dx-popup>


</div>
