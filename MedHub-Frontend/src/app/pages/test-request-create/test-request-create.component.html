<h2 class="content-block">Test Request Create</h2>
<div class="content-block">
  <div class="dx-card responsive-paddings">

    <div class="dx-fieldset">

      <div class="dx-field">
        <div class="dx-field-label">
          User
        </div>

        <div class="dx-field-value">
          <dx-select-box
            (onValueChanged)="selectedUserId = $event.value"
            [dataSource]="users"
            [searchEnabled]="true"
            [showClearButton]="true"
            displayExpr="username"
            valueExpr="id"
          ></dx-select-box>
        </div>
      </div>

      <div class="dx-field">
        <div class="dx-field-label">
          Laboratories
        </div>

        <div class="dx-field-value">
          <!--          todo: what to display for the laboratory select ?-->
          <dx-select-box
            (onValueChanged)="selectedLaboratoryId = $event.value"
            [dataSource]="laboratories"
            [searchEnabled]="true"
            [searchExpr]="['name']"
            [searchMode]="'contains'"
            [showClearButton]="true"
            [value]="selectedLaboratoryId"
            displayExpr="location"
            valueExpr="id"
            placeholder="Select a laboratory"
          ></dx-select-box>
        </div>
      </div>


      <div class="dx-field">
        <div class="dx-field-label">
          Test Types
        </div>

        <div class="dx-field-value">
          <dx-tag-box
            (onValueChanged)="selectedTestTypesIds = $event.value"
            [applyValueMode]="'useButtons'"
            [dataSource]="testTypes"
            [searchEnabled]="true"
            [searchExpr]="['name']"
            [searchMode]="'contains'"
            [showClearButton]="true"
            [value]="selectedTestTypesIds"
            displayExpr="name"
            valueExpr="id"
          ></dx-tag-box>
        </div>
      </div>
    </div>

    <div class="dx-fieldset">
      <dx-button
        (click)="createTestRequest()"
        [text]="'Create Test Request'"
      ></dx-button>
    </div>

  </div>
</div>
